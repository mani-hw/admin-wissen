"use strict";(self.webpackChunkwissen_dashboard=self.webpackChunkwissen_dashboard||[]).push([[249],{3988:function(e,n,t){t.d(n,{Z:function(){return L}});var i=t(1413),r=t(9439),a=t(2791),o=t(5416),l=t(2155),s=t(8745),u=t(5261),c=t(2041),d=t(9195),h=t(4841),v=t(5849),p=t(5771),f=t(6207),g=t(7414),m=t(3006),Z=t(1153),x=t(6314),j=t(5446),z=t(5574),w=t(5661),y=t(4899),C=t(7386),b=t(8820),P=t(5397),S=t(2426),k=t.n(S),q=t(6871),N=t(3504),B=t(8472),I=t(184);function L(e){var n=e.data,t=e.columns,S=e.users,L=e.type,A=e.assignQuizzMaster,Q=e.handleClick,E=e.anchorEl,R=e.popType,T=e.unAssignQuizzMaster,M=e.handleClose,U=e.element,O=e.setElement,D=e.updateRow,_=e.deteleteRow,W=e.inviteUsers,V=e.masters,Y=e.length,F=e.handleChangeRowsPerPage,G=e.rowsPerPage,H=e.page,J=e.handleChangePage,K=(e.getLeagues,Boolean(E)),X=K?"simple-popover":void 0,$=(0,a.useState)([]),ee=(0,r.Z)($,2),ne=ee[0],te=ee[1],ie=a.useState(!1),re=(0,r.Z)(ie,2),ae=re[0],oe=re[1],le=a.useState(""),se=(0,r.Z)(le,2),ue=se[0],ce=se[1],de=a.useState(""),he=(0,r.Z)(de,2),ve=he[0],pe=he[1],fe=a.useState(""),ge=(0,r.Z)(fe,2),me=ge[0],Ze=ge[1],xe=a.useState(""),je=(0,r.Z)(xe,2),ze=je[0],we=je[1],ye=a.useState([]),Ce=(0,r.Z)(ye,2),be=Ce[0],Pe=Ce[1],Se=a.useState(""),ke=(0,r.Z)(Se,2),qe=ke[0],Ne=ke[1],Be=(0,q.s0)(),Ie=a.useRef();(0,a.useEffect)((function(){te("invite"==R?W:S)}),[R]);var Le=function(){ce(""),pe(""),Ze(!1),we(!1),oe(!1)},Ae=function(){M(),Ne("")};return(0,I.jsxs)("div",{children:[(0,I.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,I.jsx)(v.Z,{component:N.rU,to:"/leaguesform",variant:"outlined",color:"inherit",disableElevation:!0,children:"private"===L?"Create Private League":"Create Public League"}),(0,I.jsx)(v.Z,{variant:"outlined",color:"info",sx:{float:"right"},onClick:function(){return oe(!0)},children:"Export"})]}),(0,I.jsxs)(h.Z,{Paper:!0,style:{overflow:"auto"},children:[(0,I.jsx)(u.Z,{component:h.Z,children:(0,I.jsxs)(o.Z,{"aria-label":"simple table",size:"small",children:[(0,I.jsx)(c.Z,{children:(0,I.jsx)(d.Z,{children:t.map((function(e,n){return(0,I.jsx)(s.Z,{align:"center",style:{whiteSpace:"nowrap"},width:"Actions"===e.name?"20%":"10%",children:e.name},n)}))})}),(0,I.jsx)(l.Z,{children:n.map((function(e,n){var t,r,a,o;return(0,I.jsxs)(d.Z,{children:[(0,I.jsx)(s.Z,{align:"center",component:"th",scope:"row",width:"10%",children:(0,I.jsx)(v.Z,{variant:"text",onClick:function(){Be("/quizzes?league=".concat(e.id))},children:e.title})}),(0,I.jsx)(s.Z,{align:"center",component:"th",scope:"row",width:"10%",children:null!==e&&void 0!==e&&e.quizzes?null===e||void 0===e||null===(t=e.quizzes)||void 0===t?void 0:t.length:0}),(0,I.jsx)(s.Z,{align:"center",component:"th",scope:"row",width:"10%",children:(0,I.jsx)(p.Z,{label:e.createdByName?e.createdByName:"Not yet",color:e.createdByName?"success":"primary"})}),(0,I.jsx)(s.Z,{align:"center",component:"th",scope:"row",width:"10%",children:e.organizer?e.organizer:null!==(r=null===e||void 0===e||null===(a=e.ContactInfo)||void 0===a?void 0:a.firstName)&&void 0!==r?r:""}),(0,I.jsx)(s.Z,{align:"center",component:"th",scope:"row",width:"10%",children:k()(e.createdAt).fromNow()}),(0,I.jsx)(s.Z,{align:"center",component:"th",scope:"row",width:"10%",children:e.status}),(0,I.jsx)(s.Z,{align:"center",component:"td",width:"40%",children:(0,I.jsxs)("div",{width:200,children:[(0,I.jsx)(f.ZP,{id:X,open:K,anchorEl:!0,onClose:Ae,anchorOrigin:{vertical:"center",horizontal:"center"},children:(0,I.jsxs)("div",{style:{padding:"1rem",display:"flex",flexDirection:"column",justifyContent:"center",overflowY:"quizzmaster"==R||"invite"==R&&"scroll"},children:["delete"==R||"unAssign"==R?(0,I.jsx)("h3",{children:"Are you sure?"}):"update"==R?(0,I.jsxs)(g.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,I.jsx)(m.Z,{id:"outlined-basic",size:"small",label:"laegue Title?",variant:"outlined",value:null===U||void 0===U?void 0:U.title,style:{paddingBottom:"1rem"},onChange:function(e){return O((0,i.Z)((0,i.Z)({},U),{},{title:e.target.value}))}}),(0,I.jsx)(m.Z,{id:"outlined-basic",size:"small",label:"Organizer?",variant:"outlined",value:null!==U&&void 0!==U&&U.organizer?null===U||void 0===U?void 0:U.organizer:null===U||void 0===U||null===(o=U.ContactInfo)||void 0===o?void 0:o.firstName,style:{paddingBottom:"1rem"},onChange:function(e){return O((0,i.Z)((0,i.Z)({},U),{},{organizer:e.target.value}))}}),(0,I.jsx)(m.Z,{id:"outlined-basic",size:"small",label:"About?",variant:"outlined",value:null===U||void 0===U?void 0:U.description,style:{paddingBottom:"1rem"},onChange:function(e){return O((0,i.Z)((0,i.Z)({},U),{},{description:e.target.value}))}}),(0,I.jsx)(m.Z,{id:"outlined-basic",size:"small",label:"Status?",variant:"outlined",value:null===U||void 0===U?void 0:U.status,style:{paddingBottom:"1rem"},onChange:function(e){return O((0,i.Z)((0,i.Z)({},U),{},{status:e.target.value}))}})]}):"invite"===R?(0,I.jsx)(Z.ZP,{container:!0,sx:{height:"300px"},children:(0,I.jsx)(Z.ZP,{item:!0,sm:12,children:(0,I.jsx)(x.Z,{disablePortal:!0,sx:{width:300},value:qe,options:ne.map((function(e){return{label:"".concat(e.firstName," ").concat(e.lastName),value:e.uid}})),onChange:function(e,n){Ne(n)},renderInput:function(e){return(0,I.jsx)(m.Z,(0,i.Z)((0,i.Z)({},e),{},{label:"Select Users",margin:"normal"}))}})})}):(0,I.jsx)(Z.ZP,{container:!0,sx:{height:"300px"},children:(0,I.jsx)(Z.ZP,{item:!0,sm:12,children:(0,I.jsx)(x.Z,{disablePortal:!0,sx:{width:300},value:qe,options:V.map((function(e){return{label:"".concat(e.firstName," ").concat(e.lastName),value:e.uid}})),onChange:function(e,n){Ne(n)},renderInput:function(e){return(0,I.jsx)(m.Z,(0,i.Z)((0,i.Z)({},e),{},{label:"Select Users",margin:"normal"}))}})})}),(0,I.jsxs)(g.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"flex-end",children:["quizzmaster"!==R&&(0,I.jsx)(v.Z,{variant:"outlined",size:"medium",color:"info",onClick:"update"==R?D:"delete"==R?_:T,children:"update"==R?"Update":"invite"==R?"Invite":"Confirm"}),"quizzmaster"===R&&(0,I.jsx)(v.Z,{variant:"outlined",size:"medium",onClick:function(){A(qe),Ne("")},children:"Invite"}),(0,I.jsx)(v.Z,{variant:"outlined",size:"medium",color:"error",onClick:Ae,children:"Cancel"})]})]})}),(0,I.jsxs)("div",{style:{width:"350px",justifyContent:"space-between",alignItems:"center",display:"flex"},children:[(0,I.jsx)(v.Z,{color:"info",variant:"outlined",size:"small",onClick:function(e){return Q(e,"update",n)},children:(0,I.jsx)(b.Z,{})}),"\xa0\xa0\xa0",(0,I.jsx)(v.Z,{color:"error",variant:"outlined",size:"small",onClick:function(e){return Q(e,"delete",n)},children:(0,I.jsx)(P.Z,{})}),"\xa0\xa0\xa0",(0,I.jsx)(v.Z,{color:e.createdBy&&e.createdBy?"success":"inherit",variant:"outlined",size:"small",onClick:function(t){e.createdBy&&e.createdBy?Q(t,"unAssign",n):Q(t,"quizzmaster",n)},children:e.createdBy&&e.createdBy?"Unassign":"Assign QM"},n),"\xa0\xa0\xa0","public"==L&&(0,I.jsx)(v.Z,{color:"error",variant:"outlined",size:"small",onClick:function(e){return Q(e,"invite",n)},children:"Invite Users"})]})]})})]},n)}))})]})}),(0,I.jsx)(j.Z,{rowsPerPageOptions:[10,25],component:"div",count:Y,rowsPerPage:G,page:H,onPageChange:J,onRowsPerPageChange:F})]}),(0,I.jsxs)(z.Z,{open:ae,onClose:Le,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"xs",children:[(0,I.jsx)(w.Z,{id:"alert-dialog-title",children:"Please select date range"}),(0,I.jsx)(y.Z,{children:(0,I.jsxs)(Z.ZP,{container:!0,children:[(0,I.jsxs)(Z.ZP,{xs:12,children:[(0,I.jsx)(m.Z,{fullWidth:!0,id:"outlined-basic",margin:"normal",label:"Start date",variant:"outlined",value:ue,onChange:function(e){return ce(e.target.value)},type:"date",InputLabelProps:{shrink:!0}}),me&&(0,I.jsx)("span",{style:{color:"red"},children:"Start Date is required"})]}),(0,I.jsxs)(Z.ZP,{xs:12,children:[(0,I.jsx)(m.Z,{fullWidth:!0,id:"outlined-basic",margin:"normal",label:"End date",variant:"outlined",InputLabelProps:{shrink:!0},type:"date",value:ve,onChange:function(e){return pe(e.target.value)}}),ze&&(0,I.jsx)("span",{style:{color:"red"},children:"End Date is required"})]})]})}),(0,I.jsx)(C.Z,{children:(0,I.jsxs)(g.Z,{direction:"row",spacing:2,children:[(0,I.jsx)(v.Z,{color:"error",variant:"outlined",onClick:Le,children:"Cancel"}),(0,I.jsx)(v.Z,{color:"primary",variant:"outlined",onClick:function(){try{if(0===ue.length)return void Ze(!0);if(0===ve.length)return void we(!0);var e=k()(ue).valueOf(),t=k()(ve).valueOf(),i=n.filter((function(n){return n.id>=e&&n.id<=t})).map((function(e){var n,t;return{"League Name":null===e||void 0===e?void 0:e.title,"No. of Quizzes":null!==e&&void 0!==e&&e.quizzes?null===e||void 0===e||null===(n=e.quizzes)||void 0===n?void 0:n.length:0,"Quiz Master":null!==e&&void 0!==e&&e.quizzmaster&&null!==e&&void 0!==e&&e.quizzmaster?null===e||void 0===e?void 0:e.quizzmaster:"Not yet","Created By":null!==e&&void 0!==e&&e.organizer?null===e||void 0===e?void 0:e.organizer:null===e||void 0===e||null===(t=e.ContactInfo)||void 0===t?void 0:t.firstName,"Created On":k()(null===e||void 0===e?void 0:e.createdAt).fromNow(),Status:null===e||void 0===e?void 0:e.status}}));Pe(i),Ie.current.link.click(),Le()}catch(r){console.log(r)}},children:"Export"}),(0,I.jsx)(B.CSVLink,{target:"_blank",ref:Ie,filename:"League_report.csv",data:be})]})})]})]})}},2249:function(e,n,t){t.r(n);var i=t(1413),r=t(5861),a=t(9439),o=t(4687),l=t.n(o),s=t(4015),u=t(3988),c=t(4975),d=t(2791),h=t(184),v=[{name:"League Name"},{name:"No. of Quizzes"},{name:"Quiz Master"},{name:"Created By"},{name:"Created On"},{name:"Status"},{name:"Actions"}];n.default=function(){var e=(0,d.useState)([]),n=(0,a.Z)(e,2),t=n[0],o=n[1],p=(0,d.useState)([]),f=(0,a.Z)(p,2),g=f[0],m=f[1],Z=(0,d.useState)(null),x=(0,a.Z)(Z,2),j=x[0],z=x[1],w=(0,d.useState)(null),y=(0,a.Z)(w,2),C=y[0],b=y[1],P=(0,d.useState)(null),S=(0,a.Z)(P,2),k=S[0],q=S[1],N=(0,d.useState)(null),B=(0,a.Z)(N,2),I=B[0],L=B[1],A=(0,d.useState)(10),Q=(0,a.Z)(A,2),E=Q[0],R=Q[1],T=(0,d.useState)(0),M=(0,a.Z)(T,2),U=M[0],O=M[1],D=(0,d.useState)(),_=(0,a.Z)(D,2),W=_[0],V=_[1],Y=(0,d.useState)(),F=(0,a.Z)(Y,2),G=F[0],H=F[1],J=(0,d.useState)(0),K=(0,a.Z)(J,2),X=K[0],$=K[1],ee=(0,d.useState)(!1),ne=(0,a.Z)(ee,2),te=(ne[0],ne[1]),ie=function(){b(null),L(null)};(0,d.useEffect)((function(){re(),ae()}),[]);var re=function(){var e=(0,r.Z)(l().mark((function e(){var n,t,i,r=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:E,e.prev=1,(t=c.ZP.firestore().collection("QuizLeague")).limit(n).where("leagueType","==","private").where("isApproved","==",!0).where("isRejected","==",!1).get().then((function(e){var n=e.docs.map((function(e){return e.data()})),t=e.docs[e.docs.length-1];V(t),o(n),te(!1)})),e.next=6,t.where("leagueType","==","public").get();case 6:i=e.sent.docs.length,O(i),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.ZP.firestore().collection("Users").where("userRole","==","Master").get().then((function(e){var n=e.docs.map((function(e){return e.data()}));m(n)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=(0,r.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re(n.target.value);case 3:R(n.target.value),$(0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}();return(0,h.jsx)(s.Z,{title:"Private Leagues",children:(0,h.jsx)(u.Z,{columns:v,data:t,setTableData:o,users:g,type:"private",handleClick:function(e,n,i){z(i),L(t[i]),q(n),b(e.currentTarget)},setAnchorEl:b,anchorEl:C,setIndex:z,index:j,setPopType:q,popType:k,unAssignQuizzMaster:function(){var e=t.find((function(e,n){return n==j})),n=(0,i.Z)((0,i.Z)({},e),{},{quizzmaster:"",quizzmasterId:""});c.ZP.firestore().collection("QuizLeague").doc(e.id).update(n).then((function(e){re(),ie()}))},handleClose:ie,assignQuizzMaster:function(e){var n=t.find((function(e,n){return n==j})),r=(0,i.Z)((0,i.Z)({},n),{},{quizzmaster:e.username,quizzmasterId:e.uid});c.ZP.firestore().collection("QuizLeague").doc(n.id).update(r).then((function(e){re(),ie()}))},updateRow:function(){var e=t.find((function(e,n){return n==j}));c.ZP.firestore().collection("QuizLeague").doc(e.id).update(I).then((function(e){re(),ie()}))},setElement:L,element:I,deteleteRow:function(){var e=t.find((function(e,n){return n==j}));c.ZP.firestore().collection("QuizLeague").doc(e.id).delete().then((function(e){re(),ie()}))},handleChangeRowsPerPage:oe,handleChangePage:function(e,n){te(!0);var t=X;$(n),n>t?ref.limit(E).startAfter(W).where("leagueType","==","private").where("isApproved","==",!0).where("isRejected","==",!1).get().then((function(e){var n=e.docs.map((function(e){return e.data()})),t=e.docs[e.docs.length-1],i=e.docs[0];H(i),V(t),o(n),te(!1)})):ref.limitToLast(E+1).endBefore(G).where("leagueType","==","private").where("isApproved","==",!0).where("isRejected","==",!1).get().then((function(e){var n=e.docs.map((function(e){return e.data()})),t=e.docs[e.docs.length-1],i=e.docs[0];H(i),V(t),o(n),te(!1)}))},rowsPerPage:E,setLoading:te,page:X,setPage:$,length:U})})}}}]);
//# sourceMappingURL=249.69d851ae.chunk.js.map
{"version":3,"file":"static/js/585.ca1ea3f0.chunk.js","mappings":"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","sources":["views/users/active-users.js"],"sourcesContent":["import MainCard from 'ui-component/cards/MainCard';\nimport { useState } from 'react';\nimport UsersTable from 'shared/usersTable';\nimport firebase from '../../frebase/firebase';\nimport { useEffect } from 'react';\n\nconst columns = [\n    {\n        name: 'User Name'\n    },\n    {\n        name: 'Email'\n    },\n    {\n        name: 'Location'\n    },\n    {\n        name: 'User Role',\n        selector: (row) => row.status\n    },\n    {\n        name: 'Actions'\n    }\n];\n\nfunction ActiveUsers() {\n    const [tableData, setTableData] = useState([]);\n    const [lastDoc, setLastDoc] = useState();\n    const [firstDoc, setFirstDoc] = useState();\n    const [page, setPage] = useState(0);\n    const [length, setLength] = useState(0);\n    const [loading, setLoading] = useState(false);\n    const [rowsPerPage, setRowsPerPage] = useState(10);\n\n    const ref = firebase.firestore().collection('Users');\n    const getUsers = async (limit = rowsPerPage) => {\n        setLoading(true);\n        ref.orderBy('createdAt', 'desc')\n            .limit(limit)\n            .where('isBlocked', '==', false)\n            .get()\n            .then((user) => {\n                const users = user.docs.map((doc) => doc.data());\n                const doc = user.docs[user.docs.length - 1];\n                setLastDoc(doc);\n                setTableData(users);\n                setLoading(false);\n            });\n        const count = (await ref.where('isBlocked', '==', false).get()).docs.length;\n        setLength(count);\n    };\n\n    const handleChangeRowsPerPage = async (event) => {\n        try {\n            await getUsers(event.target.value);\n            setRowsPerPage(event.target.value);\n            setPage(0);\n        } catch (err) {\n            console.log(err);\n        }\n    };\n\n    const handleChangePage = (_, newPage) => {\n        setLoading(true);\n        const previousPage = page;\n        setPage(newPage);\n        if (newPage > previousPage) {\n            ref.orderBy('createdAt', 'desc')\n                .limit(rowsPerPage)\n                .startAfter(lastDoc)\n                .where('isBlocked', '==', false)\n                .get()\n                .then((user) => {\n                    const users = user.docs.map((doc) => doc.data());\n                    const ldoc = user.docs[user.docs.length - 1];\n                    const fdoc = user.docs[0];\n                    setFirstDoc(fdoc);\n                    setLastDoc(ldoc);\n\n                    setTableData(users);\n                    setLoading(false);\n                });\n        } else {\n            ref.orderBy('createdAt', 'desc')\n                .limitToLast(rowsPerPage + 1)\n                .endBefore(firstDoc)\n                .where('isBlocked', '==', false)\n                .get()\n                .then((user) => {\n                    const users = user.docs.map((doc) => doc.data());\n                    const ldoc = user.docs[user.docs.length - 1];\n                    const fdoc = user.docs[0];\n                    setFirstDoc(fdoc);\n                    setLastDoc(ldoc);\n                    setTableData(users);\n                    setLoading(false);\n                });\n        }\n    };\n\n    useEffect(() => {\n        getUsers();\n    }, []);\n    return (\n        <MainCard title=\"Active Users\">\n            <UsersTable\n                columns={columns}\n                data={tableData && tableData}\n                setTableData={setTableData}\n                type=\"Active\"\n                page={page}\n                setPage={setPage}\n                handleChangePage={handleChangePage}\n                length={length}\n                setLoading={setLoading}\n                rowsPerPage={rowsPerPage}\n                loading={loading}\n                handleChangeRowsPerPage={handleChangeRowsPerPage}\n            />\n        </MainCard>\n    );\n}\n\nexport default ActiveUsers;\n"],"names":["columns","name","selector","row","status","useState","tableData","setTableData","lastDoc","setLastDoc","firstDoc","setFirstDoc","page","setPage","length","setLength","loading","setLoading","rowsPerPage","setRowsPerPage","ref","firebase","collection","getUsers","limit","orderBy","where","get","then","user","users","docs","map","doc","data","count","handleChangeRowsPerPage","event","target","value","console","log","useEffect","title","type","handleChangePage","_","newPage","previousPage","startAfter","ldoc","fdoc","limitToLast","endBefore"],"sourceRoot":""}
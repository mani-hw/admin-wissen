"use strict";(self.webpackChunkwissen_dashboard=self.webpackChunkwissen_dashboard||[]).push([[249],{3988:function(e,t,n){n.d(t,{Z:function(){return I}});var i=n(1413),r=n(9439),a=n(2791),o=n(5416),l=n(2155),s=n(8745),c=n(5261),u=n(2041),d=n(9195),h=n(4841),p=n(5849),f=n(5771),g=n(6207),v=n(7414),m=n(3006),Z=n(1153),x=n(6314),j=n(5446),z=n(5574),w=n(5661),y=n(4899),C=n(7386),b=n(8820),P=n(5397),S=n(2426),k=n.n(S),q=n(6871),A=n(3504),N=n(8472),B=n(184);function I(e){var t=e.data,n=e.columns,S=e.users,I=e.type,L=e.assignQuizzMaster,Q=e.handleClick,E=e.anchorEl,R=e.popType,T=e.unAssignQuizzMaster,M=e.handleClose,U=e.element,O=e.setElement,D=e.updateRow,_=e.deteleteRow,W=e.inviteUsers,V=e.masters,Y=e.length,F=e.handleChangeRowsPerPage,G=e.rowsPerPage,H=e.page,J=e.handleChangePage,K=(e.getLeagues,Boolean(E)),X=K?"simple-popover":void 0,$=(0,a.useState)([]),ee=(0,r.Z)($,2),te=ee[0],ne=ee[1],ie=a.useState(!1),re=(0,r.Z)(ie,2),ae=re[0],oe=re[1],le=a.useState(""),se=(0,r.Z)(le,2),ce=se[0],ue=se[1],de=a.useState(""),he=(0,r.Z)(de,2),pe=he[0],fe=he[1],ge=a.useState(""),ve=(0,r.Z)(ge,2),me=ve[0],Ze=ve[1],xe=a.useState(""),je=(0,r.Z)(xe,2),ze=je[0],we=je[1],ye=a.useState([]),Ce=(0,r.Z)(ye,2),be=Ce[0],Pe=Ce[1],Se=a.useState(""),ke=(0,r.Z)(Se,2),qe=ke[0],Ae=ke[1],Ne=(0,q.s0)(),Be=a.useRef();(0,a.useEffect)((function(){ne("invite"==R?W:S)}),[R]);var Ie=function(){ue(""),fe(""),Ze(!1),we(!1),oe(!1)},Le=function(){M(),Ae("")};return(0,B.jsxs)("div",{children:[(0,B.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,B.jsx)(p.Z,{component:A.rU,to:"/leaguesform",variant:"outlined",color:"inherit",disableElevation:!0,children:"private"===I?"Create Private League":"Create Public League"}),(0,B.jsx)(p.Z,{variant:"outlined",color:"info",sx:{float:"right"},onClick:function(){return oe(!0)},children:"Export"})]}),(0,B.jsxs)(h.Z,{Paper:!0,style:{overflow:"auto"},children:[(0,B.jsx)(c.Z,{component:h.Z,children:(0,B.jsxs)(o.Z,{"aria-label":"simple table",size:"small",children:[(0,B.jsx)(u.Z,{children:(0,B.jsx)(d.Z,{children:n.map((function(e,t){return(0,B.jsx)(s.Z,{align:"center",style:{whiteSpace:"nowrap"},width:"Actions"===e.name?"20%":"10%",children:e.name},t)}))})}),(0,B.jsx)(l.Z,{children:t.map((function(e,t){var n,r,a,o;return(0,B.jsxs)(d.Z,{children:[(0,B.jsx)(s.Z,{align:"center",component:"th",scope:"row",width:"10%",children:(0,B.jsx)(p.Z,{variant:"text",onClick:function(){Ne("/quizzes?league=".concat(e.id))},children:e.title})}),(0,B.jsx)(s.Z,{align:"center",component:"th",scope:"row",width:"10%",children:null!==e&&void 0!==e&&e.quizzes?null===e||void 0===e||null===(n=e.quizzes)||void 0===n?void 0:n.length:0}),(0,B.jsx)(s.Z,{align:"center",component:"th",scope:"row",width:"10%",children:(0,B.jsx)(f.Z,{label:e.createdByName?e.createdByName:"Not yet",color:e.createdByName?"success":"primary"})}),(0,B.jsx)(s.Z,{align:"center",component:"th",scope:"row",width:"10%",children:e.organizer?e.organizer:null!==(r=null===e||void 0===e||null===(a=e.ContactInfo)||void 0===a?void 0:a.firstName)&&void 0!==r?r:""}),(0,B.jsx)(s.Z,{align:"center",component:"th",scope:"row",width:"10%",children:k()(e.createdAt).fromNow()}),(0,B.jsx)(s.Z,{align:"center",component:"th",scope:"row",width:"10%",children:e.status}),(0,B.jsx)(s.Z,{align:"center",component:"td",width:"40%",children:(0,B.jsxs)("div",{width:200,children:[(0,B.jsx)(g.ZP,{id:X,open:K,anchorEl:!0,onClose:Le,anchorOrigin:{vertical:"center",horizontal:"center"},children:(0,B.jsxs)("div",{style:{padding:"1rem",display:"flex",flexDirection:"column",justifyContent:"center",overflowY:"quizzmaster"==R||"invite"==R&&"scroll"},children:["delete"==R||"unAssign"==R?(0,B.jsx)("h3",{children:"Are you sure?"}):"update"==R?(0,B.jsxs)(v.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,B.jsx)(m.Z,{id:"outlined-basic",size:"small",label:"laegue Title?",variant:"outlined",value:null===U||void 0===U?void 0:U.title,style:{paddingBottom:"1rem"},onChange:function(e){return O((0,i.Z)((0,i.Z)({},U),{},{title:e.target.value}))}}),(0,B.jsx)(m.Z,{id:"outlined-basic",size:"small",label:"Organizer?",variant:"outlined",value:null!==U&&void 0!==U&&U.organizer?null===U||void 0===U?void 0:U.organizer:null===U||void 0===U||null===(o=U.ContactInfo)||void 0===o?void 0:o.firstName,style:{paddingBottom:"1rem"},onChange:function(e){return O((0,i.Z)((0,i.Z)({},U),{},{organizer:e.target.value}))}}),(0,B.jsx)(m.Z,{id:"outlined-basic",size:"small",label:"About?",variant:"outlined",value:null===U||void 0===U?void 0:U.description,style:{paddingBottom:"1rem"},onChange:function(e){return O((0,i.Z)((0,i.Z)({},U),{},{description:e.target.value}))}}),(0,B.jsx)(m.Z,{id:"outlined-basic",size:"small",label:"Status?",variant:"outlined",value:null===U||void 0===U?void 0:U.status,style:{paddingBottom:"1rem"},onChange:function(e){return O((0,i.Z)((0,i.Z)({},U),{},{status:e.target.value}))}})]}):"invite"===R?(0,B.jsx)(Z.ZP,{container:!0,sx:{height:"300px"},children:(0,B.jsx)(Z.ZP,{item:!0,sm:12,children:(0,B.jsx)(x.Z,{disablePortal:!0,sx:{width:300},value:qe,options:te.map((function(e){return{label:"".concat(e.firstName," ").concat(e.lastName),value:e.uid}})),onChange:function(e,t){Ae(t)},renderInput:function(e){return(0,B.jsx)(m.Z,(0,i.Z)((0,i.Z)({},e),{},{label:"Select Users",margin:"normal"}))}})})}):(0,B.jsx)(Z.ZP,{container:!0,sx:{height:"300px"},children:(0,B.jsx)(Z.ZP,{item:!0,sm:12,children:(0,B.jsx)(x.Z,{disablePortal:!0,sx:{width:300},value:qe,options:V.map((function(e){return{label:"".concat(e.firstName," ").concat(e.lastName),value:e.uid}})),onChange:function(e,t){Ae(t)},renderInput:function(e){return(0,B.jsx)(m.Z,(0,i.Z)((0,i.Z)({},e),{},{label:"Select Users",margin:"normal"}))}})})}),(0,B.jsxs)(v.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"flex-end",children:["quizzmaster"!==R&&(0,B.jsx)(p.Z,{variant:"outlined",size:"medium",color:"info",onClick:"update"==R?D:"delete"==R?_:T,children:"update"==R?"Update":"invite"==R?"Invite":"Confirm"}),"quizzmaster"===R&&(0,B.jsx)(p.Z,{variant:"outlined",size:"medium",onClick:function(){L(qe),Ae("")},children:"Invite"}),(0,B.jsx)(p.Z,{variant:"outlined",size:"medium",color:"error",onClick:Le,children:"Cancel"})]})]})}),(0,B.jsxs)("div",{style:{width:"350px",justifyContent:"space-between",alignItems:"center",display:"flex"},children:[(0,B.jsx)(p.Z,{color:"info",variant:"outlined",size:"small",onClick:function(e){return Q(e,"update",t)},children:(0,B.jsx)(b.Z,{})}),"\xa0\xa0\xa0",(0,B.jsx)(p.Z,{color:"error",variant:"outlined",size:"small",onClick:function(e){return Q(e,"delete",t)},children:(0,B.jsx)(P.Z,{})}),"\xa0\xa0\xa0",(0,B.jsx)(p.Z,{color:e.createdBy&&e.createdBy?"success":"inherit",variant:"outlined",size:"small",onClick:function(n){e.createdBy&&e.createdBy?Q(n,"unAssign",t):Q(n,"quizzmaster",t)},children:e.createdBy&&e.createdBy?"Unassign":"Assign QM"},t),"\xa0\xa0\xa0","public"==I&&(0,B.jsx)(p.Z,{color:"error",variant:"outlined",size:"small",onClick:function(e){return Q(e,"invite",t)},children:"Invite Users"})]})]})})]},t)}))})]})}),(0,B.jsx)(j.Z,{rowsPerPageOptions:[10,25],component:"div",count:Y,rowsPerPage:G,page:H,onPageChange:J,onRowsPerPageChange:F})]}),(0,B.jsxs)(z.Z,{open:ae,onClose:Ie,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"xs",children:[(0,B.jsx)(w.Z,{id:"alert-dialog-title",children:"Please select date range"}),(0,B.jsx)(y.Z,{children:(0,B.jsxs)(Z.ZP,{container:!0,children:[(0,B.jsxs)(Z.ZP,{xs:12,children:[(0,B.jsx)(m.Z,{fullWidth:!0,id:"outlined-basic",margin:"normal",label:"Start date",variant:"outlined",value:ce,onChange:function(e){return ue(e.target.value)},type:"date",InputLabelProps:{shrink:!0}}),me&&(0,B.jsx)("span",{style:{color:"red"},children:"Start Date is required"})]}),(0,B.jsxs)(Z.ZP,{xs:12,children:[(0,B.jsx)(m.Z,{fullWidth:!0,id:"outlined-basic",margin:"normal",label:"End date",variant:"outlined",InputLabelProps:{shrink:!0},type:"date",value:pe,onChange:function(e){return fe(e.target.value)}}),ze&&(0,B.jsx)("span",{style:{color:"red"},children:"End Date is required"})]})]})}),(0,B.jsx)(C.Z,{children:(0,B.jsxs)(v.Z,{direction:"row",spacing:2,children:[(0,B.jsx)(p.Z,{color:"error",variant:"outlined",onClick:Ie,children:"Cancel"}),(0,B.jsx)(p.Z,{color:"primary",variant:"outlined",onClick:function(){try{if(0===ce.length)return void Ze(!0);if(0===pe.length)return void we(!0);var e=k()(ce).valueOf(),n=k()(pe).valueOf(),i=t.filter((function(t){return t.createdAt>=e&&t.createdAt<=n})).map((function(e){var t;return{"League Name":e.title,"No. of Quizzes":null!==e&&void 0!==e&&e.quizzes?null===e||void 0===e||null===(t=e.quizzes)||void 0===t?void 0:t.length:0,"Quiz Master":e.quizzmaster&&e.quizzmaster?e.quizzmaster:"Not yet","Created By":e.organizer?e.organizer:e.ContactInfo.firstName,"Created On":k()(e.createdAt).fromNow(),Status:e.status}}));Pe(i),Be.current.link.click(),Ie()}catch(r){console.log(r)}},children:"Export"}),(0,B.jsx)(N.CSVLink,{target:"_blank",ref:Be,filename:"League_report.csv",data:be})]})})]})]})}},2249:function(e,t,n){n.r(t);var i=n(1413),r=n(5861),a=n(9439),o=n(4687),l=n.n(o),s=n(4015),c=n(3988),u=n(4975),d=n(2791),h=n(184),p=[{name:"League Name"},{name:"No. of Quizzes"},{name:"Quiz Master"},{name:"Created By"},{name:"Created On"},{name:"Status"},{name:"Actions"}];t.default=function(){var e=(0,d.useState)([]),t=(0,a.Z)(e,2),n=t[0],o=t[1],f=(0,d.useState)([]),g=(0,a.Z)(f,2),v=g[0],m=g[1],Z=(0,d.useState)(null),x=(0,a.Z)(Z,2),j=x[0],z=x[1],w=(0,d.useState)(null),y=(0,a.Z)(w,2),C=y[0],b=y[1],P=(0,d.useState)(null),S=(0,a.Z)(P,2),k=S[0],q=S[1],A=(0,d.useState)(null),N=(0,a.Z)(A,2),B=N[0],I=N[1],L=(0,d.useState)(10),Q=(0,a.Z)(L,2),E=Q[0],R=Q[1],T=(0,d.useState)(0),M=(0,a.Z)(T,2),U=M[0],O=M[1],D=(0,d.useState)(),_=(0,a.Z)(D,2),W=_[0],V=_[1],Y=(0,d.useState)(),F=(0,a.Z)(Y,2),G=F[0],H=F[1],J=(0,d.useState)(0),K=(0,a.Z)(J,2),X=K[0],$=K[1],ee=(0,d.useState)(!1),te=(0,a.Z)(ee,2),ne=(te[0],te[1]),ie=function(){b(null),I(null)};(0,d.useEffect)((function(){re(),ae()}),[]);var re=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,r=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:E,e.prev=1,(n=u.ZP.firestore().collection("QuizLeague")).limit(t).where("leagueType","==","private").where("isApproved","==",!0).where("isRejected","==",!1).get().then((function(e){var t=e.docs.map((function(e){return e.data()})),n=e.docs[e.docs.length-1];V(n),o(t),ne(!1)})),e.next=6,n.where("leagueType","==","public").get();case 6:i=e.sent.docs.length,O(i),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.ZP.firestore().collection("Users").where("userRole","==","Master").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));m(t)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re(t.target.value);case 3:R(t.target.value),$(0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,h.jsx)(s.Z,{title:"Private Leagues",children:(0,h.jsx)(c.Z,{columns:p,data:n,setTableData:o,users:v,type:"private",handleClick:function(e,t,i){z(i),I(n[i]),q(t),b(e.currentTarget)},setAnchorEl:b,anchorEl:C,setIndex:z,index:j,setPopType:q,popType:k,unAssignQuizzMaster:function(){var e=n.find((function(e,t){return t==j})),t=(0,i.Z)((0,i.Z)({},e),{},{quizzmaster:"",quizzmasterId:""});u.ZP.firestore().collection("QuizLeague").doc(e.id).update(t).then((function(e){re(),ie()}))},handleClose:ie,assignQuizzMaster:function(e){var t=n.find((function(e,t){return t==j})),r=(0,i.Z)((0,i.Z)({},t),{},{quizzmaster:e.username,quizzmasterId:e.uid});u.ZP.firestore().collection("QuizLeague").doc(t.id).update(r).then((function(e){re(),ie()}))},updateRow:function(){var e=n.find((function(e,t){return t==j}));u.ZP.firestore().collection("QuizLeague").doc(e.id).update(B).then((function(e){re(),ie()}))},setElement:I,element:B,deteleteRow:function(){var e=n.find((function(e,t){return t==j}));u.ZP.firestore().collection("QuizLeague").doc(e.id).delete().then((function(e){re(),ie()}))},handleChangeRowsPerPage:oe,handleChangePage:function(e,t){ne(!0);var n=X;$(t),t>n?ref.limit(E).startAfter(W).where("leagueType","==","private").where("isApproved","==",!0).where("isRejected","==",!1).get().then((function(e){var t=e.docs.map((function(e){return e.data()})),n=e.docs[e.docs.length-1],i=e.docs[0];H(i),V(n),o(t),ne(!1)})):ref.limitToLast(E+1).endBefore(G).where("leagueType","==","private").where("isApproved","==",!0).where("isRejected","==",!1).get().then((function(e){var t=e.docs.map((function(e){return e.data()})),n=e.docs[e.docs.length-1],i=e.docs[0];H(i),V(n),o(t),ne(!1)}))},rowsPerPage:E,setLoading:ne,page:X,setPage:$,length:U})})}}}]);
//# sourceMappingURL=249.3340ab77.chunk.js.map
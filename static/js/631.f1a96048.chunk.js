"use strict";(self.webpackChunkwissen_dashboard=self.webpackChunkwissen_dashboard||[]).push([[631],{3988:function(e,n,t){t.d(n,{Z:function(){return Q}});var r=t(1413),i=t(9439),a=t(2791),o=t(5416),l=t(2155),s=t(8745),c=t(5261),u=t(2041),d=t(9195),h=t(4841),v=t(5849),f=t(5771),p=t(6207),g=t(7414),m=t(3006),Z=t(1153),x=t(6314),j=t(5446),z=t(5574),y=t(5661),w=t(4899),C=t(7386),b=t(8820),P=t(5397),k=t(2426),S=t.n(k),B=t(6871),N=t(3504),L=t(8472),I=t(184);function Q(e){var n=e.data,t=e.columns,k=e.users,Q=e.type,q=e.assignQuizzMaster,A=e.handleClick,E=e.anchorEl,D=e.popType,R=e.unAssignQuizzMaster,U=e.handleClose,M=e.element,O=e.setElement,T=e.updateRow,_=e.deteleteRow,W=e.inviteUsers,V=e.masters,Y=e.length,F=e.handleChangeRowsPerPage,G=e.rowsPerPage,H=e.page,J=e.handleChangePage,K=(e.getLeagues,Boolean(E)),X=K?"simple-popover":void 0,$=(0,a.useState)([]),ee=(0,i.Z)($,2),ne=ee[0],te=ee[1],re=a.useState(!1),ie=(0,i.Z)(re,2),ae=ie[0],oe=ie[1],le=a.useState(""),se=(0,i.Z)(le,2),ce=se[0],ue=se[1],de=a.useState(""),he=(0,i.Z)(de,2),ve=he[0],fe=he[1],pe=a.useState(""),ge=(0,i.Z)(pe,2),me=ge[0],Ze=ge[1],xe=a.useState(""),je=(0,i.Z)(xe,2),ze=je[0],ye=je[1],we=a.useState([]),Ce=(0,i.Z)(we,2),be=Ce[0],Pe=Ce[1],ke=a.useState(""),Se=(0,i.Z)(ke,2),Be=Se[0],Ne=Se[1],Le=(0,B.s0)(),Ie=a.useRef();(0,a.useEffect)((function(){te("invite"==D?W:k)}),[D]);var Qe=function(){ue(""),fe(""),Ze(!1),ye(!1),oe(!1)},qe=function(){U(),Ne("")};return(0,I.jsxs)("div",{children:[(0,I.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,I.jsx)(v.Z,{component:N.rU,to:"/leaguesform",variant:"outlined",color:"inherit",disableElevation:!0,children:"private"===Q?"Create Private League":"Create Public League"}),(0,I.jsx)(v.Z,{variant:"outlined",color:"info",sx:{float:"right"},onClick:function(){return oe(!0)},children:"Export"})]}),(0,I.jsxs)(h.Z,{Paper:!0,style:{overflow:"auto"},children:[(0,I.jsx)(c.Z,{component:h.Z,children:(0,I.jsxs)(o.Z,{"aria-label":"simple table",size:"small",children:[(0,I.jsx)(u.Z,{children:(0,I.jsx)(d.Z,{children:t.map((function(e,n){return(0,I.jsx)(s.Z,{align:"center",style:{whiteSpace:"nowrap"},width:"Actions"===e.name?"20%":"10%",children:e.name},n)}))})}),(0,I.jsx)(l.Z,{children:n.map((function(e,n){var t,i,a,o;return(0,I.jsxs)(d.Z,{children:[(0,I.jsx)(s.Z,{align:"center",component:"th",scope:"row",width:"10%",children:(0,I.jsx)(v.Z,{variant:"text",onClick:function(){Le("/quizzes?league=".concat(e.id))},children:e.title})}),(0,I.jsx)(s.Z,{align:"center",component:"th",scope:"row",width:"10%",children:null!==e&&void 0!==e&&e.quizzes?null===e||void 0===e||null===(t=e.quizzes)||void 0===t?void 0:t.length:0}),(0,I.jsx)(s.Z,{align:"center",component:"th",scope:"row",width:"10%",children:(0,I.jsx)(f.Z,{label:e.createdByName?e.createdByName:"Not yet",color:e.createdByName?"success":"primary"})}),(0,I.jsx)(s.Z,{align:"center",component:"th",scope:"row",width:"10%",children:e.organizer?e.organizer:null!==(i=null===e||void 0===e||null===(a=e.ContactInfo)||void 0===a?void 0:a.firstName)&&void 0!==i?i:""}),(0,I.jsx)(s.Z,{align:"center",component:"th",scope:"row",width:"10%",children:S()(e.createdAt).fromNow()}),(0,I.jsx)(s.Z,{align:"center",component:"th",scope:"row",width:"10%",children:e.status}),(0,I.jsx)(s.Z,{align:"center",component:"td",width:"40%",children:(0,I.jsxs)("div",{width:200,children:[(0,I.jsx)(p.ZP,{id:X,open:K,anchorEl:!0,onClose:qe,anchorOrigin:{vertical:"center",horizontal:"center"},children:(0,I.jsxs)("div",{style:{padding:"1rem",display:"flex",flexDirection:"column",justifyContent:"center",overflowY:"quizzmaster"==D||"invite"==D&&"scroll"},children:["delete"==D||"unAssign"==D?(0,I.jsx)("h3",{children:"Are you sure?"}):"update"==D?(0,I.jsxs)(g.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,I.jsx)(m.Z,{id:"outlined-basic",size:"small",label:"laegue Title?",variant:"outlined",value:null===M||void 0===M?void 0:M.title,style:{paddingBottom:"1rem"},onChange:function(e){return O((0,r.Z)((0,r.Z)({},M),{},{title:e.target.value}))}}),(0,I.jsx)(m.Z,{id:"outlined-basic",size:"small",label:"Organizer?",variant:"outlined",value:null!==M&&void 0!==M&&M.organizer?null===M||void 0===M?void 0:M.organizer:null===M||void 0===M||null===(o=M.ContactInfo)||void 0===o?void 0:o.firstName,style:{paddingBottom:"1rem"},onChange:function(e){return O((0,r.Z)((0,r.Z)({},M),{},{organizer:e.target.value}))}}),(0,I.jsx)(m.Z,{id:"outlined-basic",size:"small",label:"About?",variant:"outlined",value:null===M||void 0===M?void 0:M.description,style:{paddingBottom:"1rem"},onChange:function(e){return O((0,r.Z)((0,r.Z)({},M),{},{description:e.target.value}))}}),(0,I.jsx)(m.Z,{id:"outlined-basic",size:"small",label:"Status?",variant:"outlined",value:null===M||void 0===M?void 0:M.status,style:{paddingBottom:"1rem"},onChange:function(e){return O((0,r.Z)((0,r.Z)({},M),{},{status:e.target.value}))}})]}):"invite"===D?(0,I.jsx)(Z.ZP,{container:!0,sx:{height:"300px"},children:(0,I.jsx)(Z.ZP,{item:!0,sm:12,children:(0,I.jsx)(x.Z,{disablePortal:!0,sx:{width:300},value:Be,options:ne.map((function(e){return{label:"".concat(e.firstName," ").concat(e.lastName),value:e.uid}})),onChange:function(e,n){Ne(n)},renderInput:function(e){return(0,I.jsx)(m.Z,(0,r.Z)((0,r.Z)({},e),{},{label:"Select Users",margin:"normal"}))}})})}):(0,I.jsx)(Z.ZP,{container:!0,sx:{height:"300px"},children:(0,I.jsx)(Z.ZP,{item:!0,sm:12,children:(0,I.jsx)(x.Z,{disablePortal:!0,sx:{width:300},value:Be,options:V.map((function(e){return{label:"".concat(e.firstName," ").concat(e.lastName),value:e.uid}})),onChange:function(e,n){Ne(n)},renderInput:function(e){return(0,I.jsx)(m.Z,(0,r.Z)((0,r.Z)({},e),{},{label:"Select Users",margin:"normal"}))}})})}),(0,I.jsxs)(g.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"flex-end",children:["quizzmaster"!==D&&(0,I.jsx)(v.Z,{variant:"outlined",size:"medium",color:"info",onClick:"update"==D?T:"delete"==D?_:R,children:"update"==D?"Update":"invite"==D?"Invite":"Confirm"}),"quizzmaster"===D&&(0,I.jsx)(v.Z,{variant:"outlined",size:"medium",onClick:function(){q(Be),Ne("")},children:"Invite"}),(0,I.jsx)(v.Z,{variant:"outlined",size:"medium",color:"error",onClick:qe,children:"Cancel"})]})]})}),(0,I.jsxs)("div",{style:{width:"350px",justifyContent:"space-between",alignItems:"center",display:"flex"},children:[(0,I.jsx)(v.Z,{color:"info",variant:"outlined",size:"small",onClick:function(e){return A(e,"update",n)},children:(0,I.jsx)(b.Z,{})}),"\xa0\xa0\xa0",(0,I.jsx)(v.Z,{color:"error",variant:"outlined",size:"small",onClick:function(e){return A(e,"delete",n)},children:(0,I.jsx)(P.Z,{})}),"\xa0\xa0\xa0",(0,I.jsx)(v.Z,{color:e.createdBy&&e.createdBy?"success":"inherit",variant:"outlined",size:"small",onClick:function(t){e.createdBy&&e.createdBy?A(t,"unAssign",n):A(t,"quizzmaster",n)},children:e.createdBy&&e.createdBy?"Unassign":"Assign QM"},n),"\xa0\xa0\xa0","public"==Q&&(0,I.jsx)(v.Z,{color:"error",variant:"outlined",size:"small",onClick:function(e){return A(e,"invite",n)},children:"Invite Users"})]})]})})]},n)}))})]})}),(0,I.jsx)(j.Z,{rowsPerPageOptions:[10,25],component:"div",count:Y,rowsPerPage:G,page:H,onPageChange:J,onRowsPerPageChange:F})]}),(0,I.jsxs)(z.Z,{open:ae,onClose:Qe,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"xs",children:[(0,I.jsx)(y.Z,{id:"alert-dialog-title",children:"Please select date range"}),(0,I.jsx)(w.Z,{children:(0,I.jsxs)(Z.ZP,{container:!0,children:[(0,I.jsxs)(Z.ZP,{xs:12,children:[(0,I.jsx)(m.Z,{fullWidth:!0,id:"outlined-basic",margin:"normal",label:"Start date",variant:"outlined",value:ce,onChange:function(e){return ue(e.target.value)},type:"date",InputLabelProps:{shrink:!0}}),me&&(0,I.jsx)("span",{style:{color:"red"},children:"Start Date is required"})]}),(0,I.jsxs)(Z.ZP,{xs:12,children:[(0,I.jsx)(m.Z,{fullWidth:!0,id:"outlined-basic",margin:"normal",label:"End date",variant:"outlined",InputLabelProps:{shrink:!0},type:"date",value:ve,onChange:function(e){return fe(e.target.value)}}),ze&&(0,I.jsx)("span",{style:{color:"red"},children:"End Date is required"})]})]})}),(0,I.jsx)(C.Z,{children:(0,I.jsxs)(g.Z,{direction:"row",spacing:2,children:[(0,I.jsx)(v.Z,{color:"error",variant:"outlined",onClick:Qe,children:"Cancel"}),(0,I.jsx)(v.Z,{color:"primary",variant:"outlined",onClick:function(){try{if(0===ce.length)return void Ze(!0);if(0===ve.length)return void ye(!0);var e=S()(ce).valueOf(),t=S()(ve).valueOf(),r=n.filter((function(n){return n.id>=e&&n.id<=t})).map((function(e){var n,t;return{"League Name":null===e||void 0===e?void 0:e.title,"No. of Quizzes":null!==e&&void 0!==e&&e.quizzes?null===e||void 0===e||null===(n=e.quizzes)||void 0===n?void 0:n.length:0,"Quiz Master":null!==e&&void 0!==e&&e.quizzmaster&&null!==e&&void 0!==e&&e.quizzmaster?null===e||void 0===e?void 0:e.quizzmaster:"Not yet","Created By":null!==e&&void 0!==e&&e.organizer?null===e||void 0===e?void 0:e.organizer:null===e||void 0===e||null===(t=e.ContactInfo)||void 0===t?void 0:t.firstName,"Created On":S()(null===e||void 0===e?void 0:e.createdAt).fromNow(),Status:null===e||void 0===e?void 0:e.status}}));Pe(r),Ie.current.link.click(),Qe()}catch(i){console.log(i)}},children:"Export"}),(0,I.jsx)(L.CSVLink,{target:"_blank",ref:Ie,filename:"League_report.csv",data:be})]})})]})]})}},5631:function(e,n,t){t.r(n);var r=t(5987),i=t(1413),a=t(5861),o=t(9439),l=t(4687),s=t.n(l),c=t(4015),u=t(3988),d=t(2791),h=t(4975),v=t(184),f=["createdBy","createdByName"],p=[{name:"League Name"},{name:"No. of Quizzes"},{name:"Quiz Master"},{name:"Created By"},{name:"Created On"},{name:"Status"},{name:"Actions"}];n.default=function(){var e=(0,d.useState)([]),n=(0,o.Z)(e,2),t=n[0],l=n[1],g=(0,d.useState)([]),m=(0,o.Z)(g,2),Z=m[0],x=m[1],j=(0,d.useState)([]),z=(0,o.Z)(j,2),y=z[0],w=z[1],C=(0,d.useState)(null),b=(0,o.Z)(C,2),P=b[0],k=b[1],S=(0,d.useState)(null),B=(0,o.Z)(S,2),N=B[0],L=B[1],I=(0,d.useState)(null),Q=(0,o.Z)(I,2),q=Q[0],A=Q[1],E=(0,d.useState)(null),D=(0,o.Z)(E,2),R=D[0],U=D[1],M=(0,d.useState)(10),O=(0,o.Z)(M,2),T=O[0],_=O[1],W=(0,d.useState)(0),V=(0,o.Z)(W,2),Y=V[0],F=V[1],G=(0,d.useState)(),H=(0,o.Z)(G,2),J=H[0],K=H[1],X=(0,d.useState)(),$=(0,o.Z)(X,2),ee=$[0],ne=$[1],te=(0,d.useState)(0),re=(0,o.Z)(te,2),ie=re[0],ae=re[1],oe=(0,d.useState)(!1),le=(0,o.Z)(oe,2),se=(le[0],le[1]);(0,d.useEffect)((function(){ce(),ue(),de()}),[t]);var ce=function(){var e=(0,a.Z)(s().mark((function e(){var n,t,r,i=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:T,e.prev=1,se(!0),(t=h.ZP.firestore().collection("QuizLeague")).limit(n).orderBy("SeasonDetail.endDate","asc").get().then((function(e){var n=e.docs.map((function(e){return e.data()})),t=e.docs[e.docs.length-1];K(t),l(n),se(!1)})),e.next=7,t.get();case 7:r=e.sent.docs.length,F(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=(0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.ZP.firestore().collection("Users").where("userRole","==","Master").get().then((function(e){var n=e.docs.map((function(e){return e.data()}));x(n)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=(0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.ZP.firestore().collection("Users").where("userRole","==","Player").get().then((function(e){var n=e.docs.map((function(e){return e.data()}));w(n)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=(0,a.Z)(s().mark((function e(n){var r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.find((function(e,n){return n==P})),a=(0,i.Z)((0,i.Z)({},r),{},{createdByName:n.label,createdBy:n.value}),e.next=5,h.ZP.firestore().collection("QuizLeague").doc(r.id).update(a);case 5:ce(),fe(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),ve=function(){var e=(0,a.Z)(s().mark((function e(){var n,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.find((function(e,n){return n==P})),n.createdBy,n.createdByName,a=(0,r.Z)(n,f),o=(0,i.Z)({},a),e.next=6,h.ZP.firestore().collection("QuizLeague").doc(n.id).set(o);case 6:ce(),fe(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),fe=function(){L(null),U(null)},pe=function(){var e=(0,a.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce(n.target.value);case 3:_(n.target.value),ae(0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}();return(0,v.jsx)(c.Z,{title:"Public Leagues",children:(0,v.jsx)(u.Z,{columns:p,data:t&&t,setTableData:l,users:Z,type:"public",assignQuizzMaster:he,handleClick:function(e,n,r){k(r),U(t[r]),A(n),L(e.currentTarget)},setAnchorEl:L,anchorEl:N,setIndex:k,masters:Z,index:P,setPopType:A,popType:q,unAssignQuizzMaster:ve,handleClose:fe,setElement:U,element:R,updateRow:function(){var e=t.find((function(e,n){return n==P}));h.ZP.firestore().collection("QuizLeague").doc(e.id).update(R).then((function(){ce(),fe()}))},deteleteRow:function(){var e=t.find((function(e,n){return n==P}));h.ZP.firestore().collection("QuizLeague").doc(e.id).delete().then((function(){ce(),fe()}))},inviteUsers:y,handleChangeRowsPerPage:pe,handleChangePage:function(e,n){try{var t=h.ZP.firestore().collection("QuizLeague");se(!0);var r=ie;ae(n),n>r?t.orderBy("SeasonDetail.endDate","asc").limit(T).startAfter(J).get().then((function(e){var n=e.docs.map((function(e){return e.data()})),t=e.docs[e.docs.length-1],r=e.docs[0];ne(r),K(t),l(n),se(!1)})):t.orderBy("SeasonDetail.endDate","asc").limitToLast(T+1).endBefore(ee).get().then((function(e){var n=e.docs.map((function(e){return e.data()})),t=e.docs[e.docs.length-1],r=e.docs[0];ne(r),K(t),l(n),se(!1)}))}catch(i){console.log(i)}},rowsPerPage:T,setLoading:se,page:ie,setPage:ae,length:Y,getLeagues:function(){return ce()}})})}}}]);
//# sourceMappingURL=631.f1a96048.chunk.js.map
"use strict";(self.webpackChunkwissen_dashboard=self.webpackChunkwissen_dashboard||[]).push([[53],{5053:function(e,n,t){t.r(n),t.d(n,{default:function(){return B}});var r=t(5861),i=t(9439),a=t(4687),c=t.n(a),o=t(2791),l=t(3433),s=t(4942),u=t(1413),d=t(5849),p=t(5363),f=t(2861),x=t(4701),h=t(2626),m=t(4841),Z=t(5261),g=t(5416),v=t(2041),b=t(9195),j=t(8745),T=t(2155),y=t(5771),k=t(5446),S=t(5574),C=t(5661),P=t(4899),w=t(1153),z=t(3006),A=t(6314),I=t(7386),W=t(7414),L=t(2426),N=t.n(L),O=t(4975),Q=t(8820),R=t(5397),q=t(7814),D=t(8472),E=t(184);function _(e){var n=e.data,t=e.columns,a=e.page,L=e.handleChangePage,_=e.length,H=(e.loading,e.rowsPerPage),M=e.handleChangeRowsPerPage,B=e.setData,F=e.setMode,U=e.mode,V=e.allTopics,G=(0,o.useState)(!1),J=(0,i.Z)(G,2),K=J[0],X=J[1],Y=(0,o.useState)({name:"",type:""}),$=(0,i.Z)(Y,2),ee=$[0],ne=$[1],te=(0,o.useState)(null),re=(0,i.Z)(te,2),ie=re[0],ae=re[1],ce=(0,o.useState)(!1),oe=(0,i.Z)(ce,2),le=oe[0],se=oe[1],ue=(0,o.useState)(null),de=(0,i.Z)(ue,2),pe=de[0],fe=de[1],xe=(0,o.useState)({name:null,type:null}),he=(0,i.Z)(xe,2),me=he[0],Ze=he[1],ge=(0,o.useState)(!1),ve=(0,i.Z)(ge,2),be=ve[0],je=ve[1],Te=(0,o.useState)(""),ye=(0,i.Z)(Te,2),ke=ye[0],Se=ye[1],Ce=(0,o.useState)(""),Pe=(0,i.Z)(Ce,2),we=Pe[0],ze=Pe[1],Ae=(0,o.useState)(""),Ie=(0,i.Z)(Ae,2),We=Ie[0],Le=Ie[1],Ne=(0,o.useState)(""),Oe=(0,i.Z)(Ne,2),Qe=Oe[0],Re=Oe[1],qe=(0,o.useState)([]),De=(0,i.Z)(qe,2),Ee=De[0],_e=De[1],He=(0,o.useRef)(),Me=function(e){ne((0,u.Z)((0,u.Z)({},ee),{},(0,s.Z)({},e.target.name,e.target.value)))},Be=function(){X(!1),fe(null),ne({name:"",type:""})},Fe=function(){var e=(0,r.Z)(c().mark((function e(){var t,r,i,a,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,""!==ee.name){e.next=4;break}return Ze({name:!0}),e.abrupt("return");case 4:if(""!==ee.type){e.next=7;break}return Ze({type:!0}),e.abrupt("return");case 7:return e.next=9,O.ZP.firestore().collection("Config").get();case 9:if(t=e.sent.docs.map((function(e){return e.data()})),r=O.ZP.firestore().collection("Config"),null!==pe){e.next=31;break}if(i=N()().valueOf(),ee.createdAt=i,ee.selected=!1,ee.id=i.toString(),"subTopic"!==ee.type){e.next=24;break}if(null!==ie){e.next=19;break}return e.abrupt("return");case 19:return ee.topic=ie.value,e.next=22,r.doc("QuizSubTopics").update({SubTopics:[ee].concat((0,l.Z)(t[0].SubTopics))});case 22:e.next=26;break;case 24:return e.next=26,r.doc("QuizTopics").update({Topics:[ee].concat((0,l.Z)(t[1].Topics))});case 26:B([ee].concat((0,l.Z)(n))),Be(),ne({name:"",type:""}),e.next=49;break;case 31:if(a=[],o=n.filter((function(e){return e.id===pe})),ee.createdAt=o[0].createdAt,ee.id=o[0].id,ee.selected=!1,"topic"!==o[0].type){e.next=42;break}return a=t[1].Topics.map((function(e){return e.id==pe?ee:e})),e.next=40,r.doc("QuizTopics").update({Topics:a});case 40:e.next=45;break;case 42:return a=t[0].SubTopics.map((function(e){return e.id==pe?ee:e})),e.next=45,r.doc("QuizSubTopics").update({SubTopics:a});case 45:B(n.map((function(e){return e.id===pe?ee:e}))),fe(null),ne({name:"",type:""}),X(!1);case 49:e.next=54;break;case 51:e.prev=51,e.t0=e.catch(0),console.log(e.t0);case 54:case"end":return e.stop()}}),e,null,[[0,51]])})));return function(){return e.apply(this,arguments)}}(),Ue=function(){fe(null),se(!1)},Ve=function(){var e=(0,r.Z)(c().mark((function e(){var t,r,i,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===pe){e.next=18;break}return r=n.filter((function(e){return e.id===pe})),i=O.ZP.firestore().collection("Config"),e.next=6,O.ZP.firestore().collection("Config").get();case 6:if(a=e.sent.docs.map((function(e){return e.data()})),"topic"!==r[0].type){e.next=13;break}return t=a[1].Topics.filter((function(e){return e.id!=pe})),e.next=11,i.doc("QuizTopics").update({Topics:t});case 11:e.next=16;break;case 13:return t=a[0].SubTopics.filter((function(e){return e.id!=pe})),e.next=16,i.doc("QuizSubTopics").update({SubTopics:t});case 16:B(n.filter((function(e){return e.id!==pe}))),Ue();case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),Ge=function(){Se(""),ze(""),Le(!1),Re(!1),je(!1)};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{children:[(0,E.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,E.jsx)(d.Z,{variant:"outlined",color:"info",onClick:function(){X(!0)},children:"Create Topic"}),(0,E.jsxs)("div",{children:[(0,E.jsxs)(p.Z,{sx:{width:"200px"},children:[(0,E.jsx)(f.Z,{id:"demo-simple-select-label",children:"Type"}),(0,E.jsxs)(x.Z,{labelId:"demo-simple-select-label",size:"small",id:"demo-simple-select",value:U,onChange:function(e){return F(e.target.value)},label:"Type",children:[(0,E.jsx)(h.Z,{value:"topics",children:"Topics"}),(0,E.jsx)(h.Z,{value:"subTopics",children:"Sub Topics"})]})]}),(0,E.jsx)(d.Z,{variant:"outlined",color:"info",sx:{marginLeft:"30px"},onClick:function(){return je(!0)},children:"Export"})]})]}),(0,E.jsxs)(m.Z,{children:[(0,E.jsx)(Z.Z,{component:m.Z,children:(0,E.jsxs)(g.Z,{"aria-label":"simple table",sx:{minWidth:650},size:"small",children:[(0,E.jsx)(v.Z,{children:(0,E.jsx)(b.Z,{children:t.map((function(e,n){return(0,E.jsx)(j.Z,{align:"center",style:{whiteSpace:"nowrap"},children:e.name},n)}))})}),(0,E.jsx)(T.Z,{children:n.map((function(e,n){return(0,E.jsxs)(b.Z,{children:[(0,E.jsx)(j.Z,{component:"td",align:"center",children:null===e||void 0===e?void 0:e.name}),(0,E.jsx)(j.Z,{component:"td",align:"center",children:(0,E.jsx)(y.Z,{label:null===e||void 0===e?void 0:e.type,color:"topic"===(null===e||void 0===e?void 0:e.type)?"primary":"success"})}),(0,E.jsx)(j.Z,{component:"td",align:"center",children:N()(null===e||void 0===e?void 0:e.createdAt).fromNow()}),(0,E.jsx)(j.Z,{component:"td",align:"center",children:(0,E.jsxs)("div",{children:[(0,E.jsx)(d.Z,{color:"info",variant:"outlined",size:"small",onClick:function(){return function(e){ne({name:e.name,type:e.type}),fe(e.id),X(!0)}(e)},children:(0,E.jsx)(Q.Z,{})}),(0,E.jsx)(d.Z,{color:"error",variant:"outlined",size:"small",style:{marginLeft:"20px"},onClick:function(){fe(e.id),se(!0)},children:(0,E.jsx)(R.Z,{})})]})})]},n)}))})]})}),(0,E.jsx)(k.Z,{rowsPerPageOptions:[10,25],component:"div",count:_,rowsPerPage:H,page:a,onPageChange:L,onRowsPerPageChange:M})]})]}),(0,E.jsx)(q.Z,{open:le,cancelHandler:Ue,confirmHandler:Ve}),(0,E.jsxs)(S.Z,{open:K,id:"my-popover-id-name",children:[(0,E.jsx)(C.Z,{children:pe?"Update Topic":"Create Topic"}),(0,E.jsx)(P.Z,{children:(0,E.jsxs)(w.ZP,{container:!0,children:[(0,E.jsxs)(w.ZP,{item:!0,sm:12,children:[(0,E.jsx)(z.Z,{fullWidth:!0,label:"Name",margin:"normal",name:"name",value:ee.name,onChange:Me}),me.name&&(0,E.jsx)("span",{style:{color:"red"},children:"Name is required"})]}),(0,E.jsxs)(w.ZP,{item:!0,sm:12,children:[(0,E.jsxs)(p.Z,{margin:"normal",fullWidth:!0,children:[(0,E.jsx)(f.Z,{id:"demo-multiple-checkbox-label",children:"Select Type"}),(0,E.jsxs)(x.Z,{labelId:"demo-multiple-checkbox-label",label:"Select Type",id:"demo-multiple-checkbox",value:ee.type,onChange:Me,name:"type",children:[(0,E.jsx)(h.Z,{value:"topic",children:"Topic"}),(0,E.jsx)(h.Z,{value:"subTopic",children:"Sub Topic"})]})]}),me.type&&(0,E.jsx)("span",{style:{color:"red"},children:"Topic type is required"})]}),"subTopic"===ee.type&&(0,E.jsx)(w.ZP,{item:!0,sm:12,children:(0,E.jsx)(p.Z,{margin:"normal",fullWidth:!0,children:(0,E.jsx)(A.Z,{onChange:function(e,n){return ae(n)},disablePortal:!0,id:"combo-box-demo",options:V.filter((function(e){return"topic"===e.type})).map((function(e){return{label:e.name,value:e.id}})),renderInput:function(e){return(0,E.jsx)(z.Z,(0,u.Z)((0,u.Z)({},e),{},{label:"Topics",margin:"normal"}))}})})})]})}),(0,E.jsxs)(I.Z,{children:[(0,E.jsx)(d.Z,{variant:"outlined",onClick:Be,children:"Cancel"}),(0,E.jsx)(d.Z,{variant:"outlined",onClick:Fe,color:"error",children:null!==pe?"update":"Create"})]})]}),(0,E.jsxs)(S.Z,{open:be,onClose:Ge,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"xs",children:[(0,E.jsx)(C.Z,{id:"alert-dialog-title",children:"Please select date range"}),(0,E.jsx)(P.Z,{children:(0,E.jsxs)(w.ZP,{container:!0,children:[(0,E.jsxs)(w.ZP,{xs:12,children:[(0,E.jsx)(z.Z,{fullWidth:!0,id:"outlined-basic",margin:"normal",label:"Start date",variant:"outlined",value:ke,onChange:function(e){return Se(e.target.value)},type:"date",InputLabelProps:{shrink:!0}}),We&&(0,E.jsx)("span",{style:{color:"red"},children:"Start Date is required"})]}),(0,E.jsxs)(w.ZP,{xs:12,children:[(0,E.jsx)(z.Z,{fullWidth:!0,id:"outlined-basic",margin:"normal",label:"Block Reason",variant:"outlined",InputLabelProps:{shrink:!0},type:"date",value:we,onChange:function(e){return ze(e.target.value)}}),Qe&&(0,E.jsx)("span",{style:{color:"red"},children:"End Date is required"})]})]})}),(0,E.jsx)(I.Z,{children:(0,E.jsxs)(W.Z,{direction:"row",spacing:2,children:[(0,E.jsx)(d.Z,{color:"error",variant:"outlined",onClick:Ge,children:"Cancel"}),(0,E.jsx)(d.Z,{color:"primary",variant:"outlined",onClick:function(){try{if(0===ke.length)return void Le(!0);if(0===we.length)return void Re(!0);var e=N()(ke).valueOf(),t=N()(we).valueOf(),r=n.filter((function(n){return n.createdAt>=e&&n.createdAt<=t})).map((function(e){return{"Topic Name":e.name,Type:null===e||void 0===e?void 0:e.type,"Created On":N()(e.createdAt).fromNow()}}));_e(r),He.current.link.click(),Ge()}catch(i){console.log(i)}},children:"Export"}),(0,E.jsx)(D.CSVLink,{ref:He,target:"_blank",filename:"Topic_report.csv",data:Ee})]})})]})]})}var H=t(4015),M=[{name:"Topic Name"},{name:"Type"},{name:"Created On"},{name:"Actions"}],B=function(){var e=(0,o.useState)([]),n=(0,i.Z)(e,2),t=n[0],a=n[1],l=(0,o.useState)(!0),s=(0,i.Z)(l,2),u=s[0],d=s[1],p=(0,o.useState)(0),f=(0,i.Z)(p,2),x=f[0],h=f[1],m=(0,o.useState)(10),Z=(0,i.Z)(m,2),g=Z[0],v=Z[1],b=(0,o.useState)(),j=(0,i.Z)(b,2),T=j[0],y=j[1],k=(0,o.useState)(),S=(0,i.Z)(k,2),C=(S[0],S[1]),P=(0,o.useState)([]),w=(0,i.Z)(P,2),z=w[0],A=w[1],I=(0,o.useState)("topics"),W=(0,i.Z)(I,2),L=W[0],N=W[1],Q=function(){var e=(0,r.Z)(c().mark((function e(){var n,t,r,i,o=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:g,e.prev=1,e.next=4,O.ZP.firestore().collection("Config").get();case 4:t=e.sent.docs.map((function(e){return e.data()})),console.log(t,"ddd"),r=[],r="topics"===L?t[1].Topics.slice(0,n):t[0].SubTopics.slice(0,n),i=r[r-1],a(r),A(t[1].Topics),y(i),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,r.Z)(c().mark((function e(n,t){var r,i,o,l,s,u,p,f,m,Z,v;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.ZP.firestore().collection("Config").get();case 2:r=e.sent.docs.map((function(e){return e.data()})),i=[],i="topics"===L?r[1].Topics:r[0].SubTopics,d(!0),o=x,h(t),t>o?(l=i.findIndex((function(e){return e.id==T.id})),s=i.filter((function(e,n){return n>l})).splice(0,g),u=s[s.length-1],p=s[0],C(p),y(u),a(s),d(!1)):(f=i.findIndex((function(e){return e.id==T.id})),m=i.filter((function(e,n){return n<f})).splice(0,g),Z=m[m.length-1],v=m[0],C(v),y(Z),a(m),d(!1));case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),q=function(){var e=(0,r.Z)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.ZP.firestore().collection("Config").get();case 3:t=e.sent.docs.map((function(e){return e.data()})),[],"topics"===L?t[1].Topics.slice(0,n.target.value):t[0].SubTopics.slice(0,n.target.value),v(n.target.value),h(0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(n){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){Q()}),[L]),(0,E.jsx)(H.Z,{title:"Topics/Sub-Topics",children:(0,E.jsx)(_,{data:t,setData:function(e){return a(e)},columns:M,setLoading:d,loading:u,length:t.length,page:x,rowsPerPage:g,handleChangePage:R,handleChangeRowsPerPage:q,setMode:N,mode:L,allTopics:z})})}}}]);
//# sourceMappingURL=53.be20e401.chunk.js.map